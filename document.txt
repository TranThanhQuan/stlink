                    PROJECT Shorten Link
                    laravel 10 + Vue3


I.PHÃ‚N TÃCH Dá»° ÃN

ğŸ”¹ 1. Chá»©c nÄƒng cá»§a User (NgÆ°á»i dÃ¹ng thÆ°á»ng)
    ğŸ”¹ Quáº£n lÃ½ tÃ i khoáº£n
        ÄÄƒng kÃ½ tÃ i khoáº£n báº±ng email (cÃ³ xÃ¡c thá»±c email).
        ÄÄƒng nháº­p báº±ng email/password hoáº·c Google OAuth.
        QuÃªn máº­t kháº©u vÃ  Ä‘áº·t láº¡i máº­t kháº©u qua email.
        Chá»‰nh sá»­a há»“ sÆ¡ cÃ¡ nhÃ¢n (tÃªn, email, avatar).
    ğŸ”¹ Quáº£n lÃ½ link rÃºt gá»n
        RÃºt gá»n link (giá»›i háº¡n sá»‘ lÆ°á»£ng link).
        Quáº£n lÃ½ danh sÃ¡ch link rÃºt gá»n Ä‘Ã£ táº¡o.
        Chá»‰nh sá»­a hoáº·c xÃ³a link.
        Xem sá»‘ lÆ°á»£t click trÃªn má»—i link.
        Copy link rÃºt gá»n nhanh.
        ThÃªm máº­t kháº©u báº£o vá»‡ link.
        Tá»± Ä‘á»™ng táº¡o QR Code cho link rÃºt gá»n.
    ğŸ”¹ Xem thá»‘ng kÃª cÆ¡ báº£n
        Xem tá»•ng sá»‘ lÆ°á»£t click cá»§a tá»«ng link.
        Xem nguá»“n truy cáº­p (Facebook, Google, Direct...).
        Xem thiáº¿t bá»‹ truy cáº­p (PC, Mobile, Tablet).
        Xem quá»‘c gia cá»§a ngÆ°á»i truy cáº­p.
ğŸ”¹ 2. Chá»©c nÄƒng cá»§a Premium User (NgÆ°á»i dÃ¹ng tráº£ phÃ­)
    Bao gá»“m táº¥t cáº£ chá»©c nÄƒng cá»§a User + cÃ¡c chá»©c nÄƒng nÃ¢ng cao:

    ğŸ”¹ TÃ¹y chá»‰nh link rÃºt gá»n
        ÄÆ°á»£c phÃ©p tÃ¹y chá»‰nh slug (VD: domain.com/my-link).
        ÄÆ°á»£c phÃ©p chá»‰nh sá»­a link Ä‘Ã­ch sau khi táº¡o.
        Thiáº¿t láº­p link háº¿t háº¡n theo thá»i gian (tá»± Ä‘á»™ng vÃ´ hiá»‡u sau X ngÃ y).
        Thiáº¿t láº­p link háº¿t háº¡n theo sá»‘ lÆ°á»£t click (háº¿t X click thÃ¬ vÃ´ hiá»‡u).
        Äáº·t máº­t kháº©u báº£o vá»‡ link.
        Cháº·n IP hoáº·c quá»‘c gia khÃ´ng Ä‘Æ°á»£c truy cáº­p link.
    ğŸ”¹ Thá»‘ng kÃª chi tiáº¿t
        Xem biá»ƒu Ä‘á»“ thá»‘ng kÃª lÆ°á»£t click theo ngÃ y/thÃ¡ng.
        Xem tá»‰ lá»‡ truy cáº­p tá»« tá»«ng nguá»“n (Facebook, Ads, Google, Direct...).
        Xem danh sÃ¡ch IP & Ä‘á»‹a chá»‰ quá»‘c gia cá»§a ngÆ°á»i truy cáº­p.
        Xem danh sÃ¡ch trÃ¬nh duyá»‡t & há»‡ Ä‘iá»u hÃ nh cá»§a ngÆ°á»i truy cáº­p.
    ğŸ”¹ API & TÃ­ch há»£p
        API riÃªng Ä‘á»ƒ táº¡o link rÃºt gá»n thÃ´ng qua REST API.
        Webhook Ä‘á»ƒ nháº­n thÃ´ng bÃ¡o khi cÃ³ click má»›i.
        Export dá»¯ liá»‡u thá»‘ng kÃª ra CSV/Excel.
ğŸ”¹ 3. Chá»©c nÄƒng cá»§a Admin
    ğŸ”¹ Quáº£n lÃ½ ngÆ°á»i dÃ¹ng
        Xem danh sÃ¡ch User & Premium User.
        Cáº­p nháº­t thÃ´ng tin, nÃ¢ng cáº¥p user lÃªn Premium.
        Cháº·n, xÃ³a, hoáº·c vÃ´ hiá»‡u hÃ³a tÃ i khoáº£n user.
        Quáº£n lÃ½ danh sÃ¡ch thanh toÃ¡n cá»§a Premium User.
    ğŸ”¹ Quáº£n lÃ½ link rÃºt gá»n
        Xem danh sÃ¡ch táº¥t cáº£ link rÃºt gá»n trong há»‡ thá»‘ng.
        XÃ³a hoáº·c vÃ´ hiá»‡u hÃ³a link vi pháº¡m.
        Kiá»ƒm tra link cÃ³ chá»©a ná»™i dung Ä‘á»™c háº¡i (phishing, spam, virus).
        BÃ¡o cÃ¡o & phÃ¢n tÃ­ch sá»‘ lÆ°á»£ng link rÃºt gá»n trong há»‡ thá»‘ng.
    ğŸ”¹ Quáº£n lÃ½ thá»‘ng kÃª há»‡ thá»‘ng
        Xem tá»•ng sá»‘ lÆ°á»£t click trÃªn toÃ n há»‡ thá»‘ng.
        Xem sá»‘ lÆ°á»£ng link rÃºt gá»n theo tá»«ng ngÃ y.
        Xem danh sÃ¡ch nguá»“n truy cáº­p phá»• biáº¿n nháº¥t.
        Xem thiáº¿t bá»‹, trÃ¬nh duyá»‡t & quá»‘c gia truy cáº­p phá»• biáº¿n nháº¥t.
    ğŸ”¹ Quáº£n lÃ½ phÃ¢n quyá»n
        Táº¡o & chá»‰nh sá»­a cÃ¡c nhÃ³m quyá»n (vÃ­ dá»¥: User, Premium, Moderator).
        Cáº¥u hÃ¬nh quyá»n truy cáº­p cho tá»«ng nhÃ³m.
        PhÃ¢n quyá»n cá»¥ thá»ƒ cho tá»«ng user.
ğŸ”¹ 4. Chá»©c nÄƒng má»Ÿ rá»™ng & nÃ¢ng cao
    ğŸ”¹ Há»‡ thá»‘ng kiáº¿m tiá»n tá»« link rÃºt gá»n
        Äáº·t quáº£ng cÃ¡o trÆ°á»›c khi redirect (interstitial ads).
        TÃ­nh toÃ¡n thu nháº­p dá»±a trÃªn CPM/CPC.
        Cho phÃ©p user rÃºt tiá»n náº¿u Ä‘áº¡t má»©c tá»‘i thiá»ƒu.
    ğŸ”¹ TÃ­ch há»£p chatbot & thÃ´ng bÃ¡o
        Gá»­i thÃ´ng bÃ¡o khi link Ä‘áº¡t sá»‘ lÆ°á»£t click nháº¥t Ä‘á»‹nh.
        Gá»­i email bÃ¡o cÃ¡o lÆ°á»£t click hÃ ng tuáº§n/thÃ¡ng.
        TÃ­ch há»£p chatbot há»— trá»£ khÃ¡ch hÃ ng qua Messenger/Zalo.


PhÆ°Æ¡ng Ã¡n xá»­ lÃ½ khi link háº¿t háº¡n

Chuyá»ƒn hÆ°á»›ng Ä‘áº¿n trang thÃ´ng bÃ¡o lá»—i (expired-link).
Ná»™i dung trang:
ğŸ”´ ThÃ´ng bÃ¡o link Ä‘Ã£ háº¿t háº¡n: "LiÃªn káº¿t nÃ y khÃ´ng cÃ²n kháº£ dá»¥ng."
ğŸ“Œ Gá»£i Ã½ hÃ nh Ä‘á»™ng: Náº¿u ngÆ°á»i táº¡o link lÃ  chÃ­nh chá»§, cho phÃ©p há» táº¡o láº¡i.

public function redirectToShortLink($short_code)
{
    $link = ShortLink::where('short_code', $short_code)->first();

    if (!$link) {
        abort(404, 'LiÃªn káº¿t khÃ´ng tá»“n táº¡i.');
    }

    if ($link->expires_at && $link->expires_at <= now()) {
        return response()->view('errors.expired-link', compact('link'), 410);
    }

    return redirect()->away($link->original_url);
}


    hoáº·c

    Chuyá»ƒn hÆ°á»›ng vá» trang chá»§ hoáº·c trang landing
    Náº¿u khÃ´ng muá»‘n hiá»ƒn thá»‹ lá»—i, cÃ³ thá»ƒ chuyá»ƒn hÆ°á»›ng vá» trang chá»§:
    Tá»‘t cho SEO, trÃ¡nh lá»—i 404 nhiá»u trÃªn website.


    return redirect()->route('home')->with('error', 'LiÃªn káº¿t nÃ y Ä‘Ã£ háº¿t háº¡n.');

///////     CÃ¡c lá»—i cÃ³ thá»ƒ xáº£y ra  /////////////

CÃ¡c lá»—i cÃ³ thá»ƒ xáº£y ra khi váº­n hÃ nh há»‡ thá»‘ng rÃºt gá»n link
ğŸ“Œ 1. Lá»—i liÃªn quan Ä‘áº¿n link rÃºt gá»n
        1.1. Link khÃ´ng tá»“n táº¡i (404)
        NguyÃªn nhÃ¢n: NgÆ°á»i dÃ¹ng nháº­p sai mÃ£ rÃºt gá»n hoáº·c link Ä‘Ã£ bá»‹ xÃ³a.
        CÃ¡ch xá»­ lÃ½: Hiá»ƒn thá»‹ trang lá»—i 404 vá»›i thÃ´ng bÃ¡o: "LiÃªn káº¿t khÃ´ng tá»“n táº¡i."
        1.2. Link Ä‘Ã£ háº¿t háº¡n (410)
        NguyÃªn nhÃ¢n: Link Ä‘Ã£ háº¿t háº¡n theo chÃ­nh sÃ¡ch (10 ngÃ y vá»›i user, tÃ¹y chá»‰nh vá»›i Premium).
        CÃ¡ch xá»­ lÃ½: Hiá»ƒn thá»‹ trang lá»—i 410 hoáº·c cho phÃ©p Premium táº¡o láº¡i link.
        1.3. Link bá»‹ vÃ´ hiá»‡u hÃ³a
        NguyÃªn nhÃ¢n: Admin táº¯t link do vi pháº¡m chÃ­nh sÃ¡ch.
        CÃ¡ch xá»­ lÃ½: Hiá»ƒn thá»‹ thÃ´ng bÃ¡o: "LiÃªn káº¿t nÃ y Ä‘Ã£ bá»‹ vÃ´ hiá»‡u hÃ³a bá»Ÿi quáº£n trá»‹ viÃªn."
        1.4. Chuyá»ƒn hÆ°á»›ng sai URL
        NguyÃªn nhÃ¢n: Link bá»‹ lá»—i do sai dá»¯ liá»‡u khi nháº­p vÃ o.
        CÃ¡ch xá»­ lÃ½: Kiá»ƒm tra dá»¯ liá»‡u, validate URL trÆ°á»›c khi lÆ°u.
ğŸ“Œ 2. Lá»—i liÃªn quan Ä‘áº¿n ngÆ°á»i dÃ¹ng
        2.1. KhÃ´ng Ä‘Äƒng nháº­p Ä‘Æ°á»£c
        NguyÃªn nhÃ¢n: Sai máº­t kháº©u hoáº·c tÃ i khoáº£n bá»‹ khÃ³a.
        CÃ¡ch xá»­ lÃ½: Hiá»ƒn thá»‹ lá»—i cá»¥ thá»ƒ, thÃªm chá»©c nÄƒng quÃªn máº­t kháº©u.
        2.2. KhÃ´ng xÃ¡c thá»±c Ä‘Æ°á»£c tÃ i khoáº£n
        NguyÃªn nhÃ¢n: Email xÃ¡c thá»±c khÃ´ng Ä‘áº¿n há»™p thÆ°.
        CÃ¡ch xá»­ lÃ½: Cho phÃ©p gá»­i láº¡i email xÃ¡c thá»±c.
        2.3. KhÃ´ng táº¡o Ä‘Æ°á»£c link
        NguyÃªn nhÃ¢n: User bá»‹ giá»›i háº¡n sá»‘ lÆ°á»£ng link/ngÃ y.
        CÃ¡ch xá»­ lÃ½: ThÃ´ng bÃ¡o sá»‘ lÆ°á»£ng tá»‘i Ä‘a user cÃ³ thá»ƒ táº¡o.
        2.4. Premium khÃ´ng Ä‘áº·t Ä‘Æ°á»£c thá»i gian háº¿t háº¡n
        NguyÃªn nhÃ¢n: Nháº­p sai Ä‘á»‹nh dáº¡ng thá»i gian.
        CÃ¡ch xá»­ lÃ½: Validate Ä‘áº§u vÃ o cá»§a expires_at.
ğŸ“Œ 3. Lá»—i báº£o máº­t & táº¥n cÃ´ng há»‡ thá»‘ng
        3.1. Spam táº¡o link hÃ ng loáº¡t
        NguyÃªn nhÃ¢n: Bot hoáº·c user láº¡m dá»¥ng API.
        CÃ¡ch xá»­ lÃ½: Giá»›i háº¡n sá»‘ láº§n táº¡o link theo IP/user trong 1 giá».
        3.2. SQL Injection
        NguyÃªn nhÃ¢n: Nháº­p dá»¯ liá»‡u khÃ´ng an toÃ n vÃ o database.
        CÃ¡ch xá»­ lÃ½: DÃ¹ng Laravel Query Builder hoáº·c Eloquent Ä‘á»ƒ trÃ¡nh SQL Injection.
        3.3. XSS Attack
        NguyÃªn nhÃ¢n: User nháº­p script vÃ o URL hoáº·c custom alias.
        CÃ¡ch xá»­ lÃ½: Encode output, dÃ¹ng htmlspecialchars().
        3.4. CSRF Attack
        NguyÃªn nhÃ¢n: NgÆ°á»i dÃ¹ng bá»‹ táº¥n cÃ´ng qua form khÃ´ng báº£o máº­t.
        CÃ¡ch xá»­ lÃ½: Sá»­ dá»¥ng CSRF Token trong form.
ğŸ“Œ 4. Lá»—i liÃªn quan Ä‘áº¿n hiá»‡u suáº¥t & dá»¯ liá»‡u
        4.1. Tá»‘c Ä‘á»™ cháº­m khi truy váº¥n dá»¯ liá»‡u
        NguyÃªn nhÃ¢n: Dá»¯ liá»‡u quÃ¡ lá»›n, khÃ´ng cÃ³ index.
        CÃ¡ch xá»­ lÃ½: Táº¡o index trÃªn short_code, expires_at, created_at.
        4.2. LÆ°á»£ng truy cáº­p cao gÃ¢y quÃ¡ táº£i
        NguyÃªn nhÃ¢n: KhÃ´ng cÃ³ caching hoáº·c load balancing.
        CÃ¡ch xá»­ lÃ½: Sá»­ dá»¥ng Redis Ä‘á»ƒ cache, tá»‘i Æ°u database, CDN.
        4.3. KhÃ´ng Ä‘áº¿m Ä‘Ãºng lÆ°á»£t click
        NguyÃªn nhÃ¢n: Request bá»‹ trÃ¹ng hoáº·c bá»‹ cháº·n.
        CÃ¡ch xá»­ lÃ½: Chá»‘ng spam báº±ng IP hoáº·c session.
ğŸ“Œ 5. Lá»—i liÃªn quan Ä‘áº¿n thanh toÃ¡n (náº¿u cÃ³ gÃ³i Premium)
        5.1. KhÃ´ng nÃ¢ng cáº¥p Ä‘Æ°á»£c Premium
        NguyÃªn nhÃ¢n: Lá»—i thanh toÃ¡n.
        CÃ¡ch xá»­ lÃ½: Kiá»ƒm tra cá»•ng thanh toÃ¡n, log lá»—i Ä‘á»ƒ xá»­ lÃ½.
        5.2. Máº¥t quyá»n Premium sau khi gia háº¡n
        NguyÃªn nhÃ¢n: Lá»—i cáº­p nháº­t tráº¡ng thÃ¡i tÃ i khoáº£n.
        CÃ¡ch xá»­ lÃ½: Kiá»ƒm tra cron job xá»­ lÃ½ gia háº¡n gÃ³i Premium.
ğŸ“Œ 6. Lá»—i liÃªn quan Ä‘áº¿n tracking & phÃ¢n tÃ­ch
        6.1. KhÃ´ng nháº­n diá»‡n Ä‘Ãºng nguá»“n traffic
        NguyÃªn nhÃ¢n: Referrer bá»‹ cháº·n bá»Ÿi trÃ¬nh duyá»‡t hoáº·c adblock.
        CÃ¡ch xá»­ lÃ½: ThÃªm tracking UTM, sá»­ dá»¥ng server-side tracking.
        6.2. Thá»‘ng kÃª lÆ°á»£t click khÃ´ng chÃ­nh xÃ¡c
        NguyÃªn nhÃ¢n: Do bot hoáº·c ngÆ°á»i dÃ¹ng truy cáº­p áº£o.
        CÃ¡ch xá»­ lÃ½: Lá»c bot dá»±a trÃªn user-agent, giá»›i háº¡n click tá»« cÃ¹ng IP trong thá»i gian ngáº¯n.



ğŸ”¹ CÃ´ng Nghá»‡ Sá»­ dá»¥ng


 Backend (Server-side)
âœ… Laravel â€“ Framework PHP chÃ­nh Ä‘á»ƒ xÃ¢y dá»±ng API vÃ  xá»­ lÃ½ backend.
âœ… Inertia.js â€“ Káº¿t há»£p Laravel & Vue.js mÃ  khÃ´ng cáº§n API thuáº§n tÃºy.
âœ… MySQL â€“ Há»‡ quáº£n trá»‹ cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘á»ƒ lÆ°u link rÃºt gá»n, ngÆ°á»i dÃ¹ng, thá»‘ng kÃª.
âœ… Laravel Breeze â€“ Há»— trá»£ authentication (Ä‘Äƒng nháº­p, Ä‘Äƒng kÃ½, reset máº­t kháº©u).
âœ… Laravel Sanctum â€“ Cung cáº¥p báº£o máº­t API cho Premium Users.
âœ… Jenssegers Agent â€“ XÃ¡c Ä‘á»‹nh thiáº¿t bá»‹ & trÃ¬nh duyá»‡t cá»§a ngÆ°á»i truy cáº­p.
âœ… GeoIP2 â€“ XÃ¡c Ä‘á»‹nh quá»‘c gia, thÃ nh phá»‘ cá»§a ngÆ°á»i truy cáº­p tá»« IP.
âœ… Queue & Job â€“ Xá»­ lÃ½ tracking lÆ°á»£t click, gá»­i email mÃ  khÃ´ng áº£nh hÆ°á»Ÿng hiá»‡u suáº¥t.



ğŸ”¹ Frontend (Client-side)
âœ… Vue.js 3 â€“ Framework frontend chÃ­nh Ä‘á»ƒ xÃ¢y dá»±ng giao diá»‡n.
âœ… TailwindCSS â€“ Thiáº¿t káº¿ UI linh hoáº¡t, nháº¹, dá»… tÃ¹y chá»‰nh.
âœ… Chart.js â€“ Hiá»ƒn thá»‹ biá»ƒu Ä‘á»“ thá»‘ng kÃª sá»‘ lÆ°á»£t click, nguá»“n truy cáº­p.
âœ… Axios â€“ Gá»­i vÃ  nháº­n dá»¯ liá»‡u giá»¯a frontend & backend.
âœ… Vue Router â€“ Äiá»u hÆ°á»›ng trang trong frontend.
âœ… Pinia â€“ Quáº£n lÃ½ state thay vÃ¬ Vuex (nháº¹ hÆ¡n, dá»… dÃ¹ng hÆ¡n).
âœ… QR Code Generator â€“ Táº¡o mÃ£ QR tá»« link rÃºt gá»n.




ğŸ”¹ Authentication & Báº£o máº­t
âœ… Google OAuth â€“ Há»— trá»£ Ä‘Äƒng nháº­p báº±ng Google.
âœ… Laravel Throttle â€“ Giá»›i háº¡n sá»‘ láº§n request trÃ¡nh spam.
âœ… CSRF & XSS Protection â€“ Báº£o vá»‡ form vÃ  API khá»i táº¥n cÃ´ng.
âœ… reCAPTCHA â€“ Chá»‘ng bot khi Ä‘Äƒng kÃ½ tÃ i khoáº£n.


ğŸ”¹ DevOps & Deploy
âœ… Docker â€“ Cháº¡y mÃ´i trÆ°á»ng phÃ¡t triá»ƒn Ä‘á»“ng nháº¥t.
âœ… Redis â€“ Cache dá»¯ liá»‡u, tÄƒng tá»‘c truy váº¥n.
âœ… Supervisor â€“ Quáº£n lÃ½ Queue & Job xá»­ lÃ½ lÆ°á»£t click.
âœ… Nginx / Apache â€“ Web server Ä‘á»ƒ cháº¡y Laravel.
âœ… GitHub Actions â€“ CI/CD Ä‘á»ƒ deploy tá»± Ä‘á»™ng.
âœ… VPS / Cloud (AWS, DigitalOcean, Linode, Vultr,...) â€“ Triá»ƒn khai há»‡ thá»‘ng.


ğŸ”¹ CÃ´ng cá»¥ há»— trá»£ & Debug
âœ… Laravel Debugbar â€“ Debug query vÃ  hiá»‡u suáº¥t á»©ng dá»¥ng.
âœ… Postman â€“ Kiá»ƒm thá»­ API.
âœ… Sentry / Bugsnag â€“ Theo dÃµi lá»—i real-time.



ğŸ¯ Tá»•ng káº¿t
ğŸ“Œ Backend: Laravel, Inertia.js, MySQL, Sanctum.
ğŸ“Œ Frontend: Vue.js 3, TailwindCSS, Chart.js.
ğŸ“Œ Báº£o máº­t: Google OAuth, CSRF, XSS, Throttle.
ğŸ“Œ Deploy: Docker, Redis, Supervisor, VPS.




////////  PERMIISSION      /////////

CÃ¡c quyá»n sáº½ Ä‘Æ°á»£c lÆ°u trong database (báº£ng permissions), sau Ä‘Ã³ Admin cÃ³ thá»ƒ báº­t/táº¯t tá»«ng quyá»n cho User hoáº·c Premium.

Danh sÃ¡ch quyá»n (Permissions)
ğŸ”¹ Quáº£n lÃ½ tÃ i khoáº£n
âœ… manage_users â€“ Xem danh sÃ¡ch user.
âœ… edit_users â€“ Chá»‰nh sá»­a thÃ´ng tin user.
âœ… delete_users â€“ XÃ³a hoáº·c vÃ´ hiá»‡u hÃ³a tÃ i khoáº£n.
âœ… upgrade_users â€“ NÃ¢ng cáº¥p user lÃªn Premium.
âœ… ban_users â€“ Cáº¥m user vi pháº¡m.

ğŸ”¹ Quáº£n lÃ½ link rÃºt gá»n
âœ… create_links â€“ Táº¡o link rÃºt gá»n.
âœ… edit_links â€“ Chá»‰nh sá»­a link rÃºt gá»n.
âœ… delete_links â€“ XÃ³a link rÃºt gá»n.
âœ… custom_slug â€“ Táº¡o slug tÃ¹y chá»‰nh (VD: domain.com/my-link).
âœ… set_expiry_links â€“ Thiáº¿t láº­p link háº¿t háº¡n theo thá»i gian/click.
âœ… protect_links â€“ Äáº·t máº­t kháº©u báº£o vá»‡ link.
âœ… block_countries â€“ Cháº·n IP hoáº·c quá»‘c gia khÃ´ng Ä‘Æ°á»£c truy cáº­p.

ğŸ”¹ Quáº£n lÃ½ thá»‘ng kÃª & tracking
âœ… view_analytics â€“ Xem sá»‘ lÆ°á»£t click.
âœ… view_referrer_stats â€“ Xem nguá»“n truy cáº­p (Facebook, Google, Adsâ€¦).
âœ… view_device_stats â€“ Xem thiáº¿t bá»‹ truy cáº­p (PC, Mobile, Tablet).
âœ… view_country_stats â€“ Xem danh sÃ¡ch quá»‘c gia truy cáº­p.
âœ… export_data â€“ Xuáº¥t dá»¯ liá»‡u thá»‘ng kÃª ra file CSV/Excel.

ğŸ”¹ Quáº£n lÃ½ há»‡ thá»‘ng
âœ… view_all_links â€“ Xem táº¥t cáº£ link rÃºt gá»n trong há»‡ thá»‘ng.
âœ… delete_any_links â€“ XÃ³a link vi pháº¡m.
âœ… view_reports â€“ Xem bÃ¡o cÃ¡o há»‡ thá»‘ng.
âœ… manage_settings â€“ Cáº¥u hÃ¬nh há»‡ thá»‘ng (tÃªn, logo, domainâ€¦).
âœ… manage_ads â€“ Quáº£n lÃ½ quáº£ng cÃ¡o trÃªn link rÃºt gá»n.

ğŸ”¹ Quáº£n lÃ½ quyá»n & phÃ¢n quyá»n
âœ… assign_roles â€“ GÃ¡n quyá»n cho user.
âœ… create_roles â€“ Táº¡o nhÃ³m quyá»n má»›i.
âœ… edit_roles â€“ Chá»‰nh sá»­a quyá»n cá»§a nhÃ³m.
âœ… delete_roles â€“ XÃ³a nhÃ³m quyá»n.







II. Thiáº¿t káº¿ database


ğŸ“Œ 1. Báº£ng users (LÆ°u thÃ´ng tin ngÆ°á»i dÃ¹ng)

        CREATE TABLE users (
            id            BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
            name          VARCHAR(255) NOT NULL,
            email         VARCHAR(255) UNIQUE NOT NULL,
            password      VARCHAR(255) NULL, -- Náº¿u Ä‘Äƒng nháº­p báº±ng Google thÃ¬ cÃ³ thá»ƒ NULL
            provider      ENUM('email', 'google') DEFAULT 'email', -- PhÆ°Æ¡ng thá»©c Ä‘Äƒng nháº­p
            provider_id   VARCHAR(255) NULL, -- LÆ°u ID khi Ä‘Äƒng nháº­p báº±ng Google
            role          ENUM('user', 'premium', 'moderator', 'admin') DEFAULT 'user',
            created_at    TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            updated_at    TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
        );



ğŸ“Œ 2. Báº£ng links (LÆ°u link rÃºt gá»n)

        CREATE TABLE links (
            id            BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
            user_id       BIGINT UNSIGNED NOT NULL,
            short_code    VARCHAR(20) UNIQUE NOT NULL, -- MÃ£ rÃºt gá»n
            original_url  TEXT NOT NULL, -- URL gá»‘c
            created_at    TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            expires_at    TIMESTAMP NULL, -- User thÆ°á»ng máº·c Ä‘á»‹nh 10 ngÃ y, Premium tá»± chá»n
            status        ENUM('active', 'expired', 'disabled') DEFAULT 'active', -- Tráº¡ng thÃ¡i
            FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
        );


ğŸ“Œ 3. Báº£ng click_statistics (LÆ°u lá»‹ch sá»­ truy cáº­p link)

        CREATE TABLE click_statistics (
            id            BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
            short_link_id BIGINT UNSIGNED NOT NULL,
            ip_address    VARCHAR(45) NOT NULL,
            user_agent    TEXT NOT NULL,
            referrer      ENUM('facebook', 'google', 'ads', 'other') DEFAULT 'other', -- Nguá»“n truy cáº­p
            device_type   ENUM('mobile', 'tablet', 'pc') NOT NULL, -- PhÃ¢n loáº¡i thiáº¿t bá»‹
            os           VARCHAR(50) NOT NULL, -- Há»‡ Ä‘iá»u hÃ nh (iOS, Android, Windows,...)
            country       VARCHAR(100) NULL, -- Quá»‘c gia truy cáº­p
            clicked_at    TIMESTAMP DEFAULT CURRENT_TIMESTAMP, -- Thá»i gian truy cáº­p
            FOREIGN KEY (short_link_id) REFERENCES links(id) ON DELETE CASCADE
        );


ğŸ“Œ 4. Báº£ng permissions (LÆ°u danh sÃ¡ch quyá»n)

        CREATE TABLE permissions (
            id          BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
            code        VARCHAR(50) UNIQUE NOT NULL, -- MÃ£ quyá»n (vd: manage_users)
            name        VARCHAR(255) NOT NULL, -- TÃªn quyá»n
            description TEXT NULL -- MÃ´ táº£ quyá»n
        );



ğŸ“Œ 5. Báº£ng role_permissions (PhÃ¢n quyá»n cho vai trÃ²)

        CREATE TABLE role_permissions (
            id            BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
            role          ENUM('user', 'premium', 'moderator', 'admin') NOT NULL,
            permission_id BIGINT UNSIGNED NOT NULL,
            FOREIGN KEY (permission_id) REFERENCES permissions(id) ON DELETE CASCADE
        );


ğŸ“Œ 6. Báº£ng user_payments (LÆ°u lá»‹ch sá»­ thanh toÃ¡n cá»§a Premium)

        CREATE TABLE user_payments (
            id           BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
            user_id      BIGINT UNSIGNED NOT NULL,
            amount       DECIMAL(10,2) NOT NULL, -- Sá»‘ tiá»n thanh toÃ¡n
            payment_method ENUM('credit_card', 'paypal', 'bank_transfer') NOT NULL,
            status       ENUM('pending', 'completed', 'failed') DEFAULT 'pending',
            created_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
        );

ğŸ“Œ 7. Index Ä‘á»ƒ tá»‘i Æ°u truy váº¥n

        CREATE INDEX idx_short_code ON links(short_code);
        CREATE INDEX idx_expires_at ON links(expires_at);
        CREATE INDEX idx_clicked_at ON click_statistics(clicked_at);
        CREATE INDEX idx_referrer ON click_statistics(referrer);


** Táº¡o cÃ¡c model cáº§n thiáº¿t **
    - cÃ¡c model cáº§n thiáº¿t:
        User: LÆ°u thÃ´ng tin ngÆ°á»i dÃ¹ng
        Group: Quáº£n lÃ½ vai trÃ² (Admin, User, Premium, v.v.)


        ClickStatistic: LÆ°u trá»¯ lÆ°á»£t click
        Plan: GÃ³i Ä‘Äƒng kÃ½ Premium
        Subscription: NgÆ°á»i dÃ¹ng Ä‘Äƒng kÃ½ gÃ³i Premium




        php artisan make:model Role -m (-m Ä‘á»ƒ táº¡o thÃªm migration)

    *Note: Ä‘áº·t tÃªn model theo sá»‘ Ã­t thÃ¬ migration sáº½ tá»± Ä‘á»™ng Ä‘áº·t sá»‘ nhiá»u

        Quan há»‡ giá»¯a cÃ¡c báº£ng
        DÆ°á»›i Ä‘Ã¢y lÃ  quan há»‡ giá»¯a cÃ¡c báº£ng trong há»‡ thá»‘ng:

        User â†” ShortLink (1-N)
        â†’ Má»™t user cÃ³ nhiá»u link rÃºt gá»n.

        ShortLink â†” ClickStatistic (1-N)
        â†’ Má»™t link cÃ³ nhiá»u lÆ°á»£t click.

        User â†” Role (N-N) (thÃ´ng qua user_roles)
        â†’ Má»™t user cÃ³ thá»ƒ cÃ³ nhiá»u vai trÃ².

        Role â†” Permission (N-N) (thÃ´ng qua role_permissions)
        â†’ Má»™t vai trÃ² cÃ³ nhiá»u quyá»n.

        User â†” Subscription (1-N)
        â†’ Má»™t user cÃ³ nhiá»u láº§n Ä‘Äƒng kÃ½ Premium.

        Subscription â†” Plan (N-1)
        â†’ Má»™t gÃ³i Premium cÃ³ nhiá»u subscriptions.

** Táº¡o migration **

** Táº¡o  Seeder **

        DB::statement('SET FOREIGN_KEY_CHECKS=0'); // táº¡m bá» qua khÃ³a ngoáº¡i

        $groupId = DB::table('groups')->insertGetId([
            'name' => 'Admin',
            'user_id' => 0,
            'permissions' => json_encode([
                "users" => ["view", "add", "edit", "delete"],
                "groups" => ["view", "add", "edit", "delete", "permission"]
            ]),
            'created_at' => now(),
            'updated_at' => now(),
        ]);

        DB::statement('SET FOREIGN_KEY_CHECKS=1'); //tiáº¿p tá»¥c kiá»ƒm tra khÃ³a ngoáº¡i

        if ($groupId > 0) {
            $userId = DB::table('users')->insertGetId([
                'name' => 'Admin',
                'email' => 'admin@gmail.com',
                'password' => Hash::make('123456789'),
                'isAdmin' => 1,
                'group_id' => $groupId, // DÃ¹ng biáº¿n thay vÃ¬ hardcode
                'provider' => 'email',
                'status' => 'active',
                'created_at' => now(),
                'updated_at' => now(),
            ]);

            if ($userId > 0) {
                DB::table('links')->insert([
                    [
                        'title' => 'Google',
                        'user_id' => $userId, // DÃ¹ng biáº¿n thay vÃ¬ hardcode 1
                        'short_code' => 'googl123',
                        'original_url' => 'https://www.google.com',
                        'status' => 'active',
                        'expires_at' => null,
                        'created_at' => now(),
                        'updated_at' => now(),
                    ],
                    [
                        'title' => 'Facebook',
                        'user_id' => $userId,
                        'short_code' => 'fb12345',
                        'original_url' => 'https://www.facebook.com',
                        'status' => 'active',
                        'expires_at' => null,
                        'created_at' => now(),
                        'updated_at' => now(),
                    ]
                ]);
            }
        }

III. Menu Sidebar

Sidebar Menu Theo Role
Má»—i role sáº½ cÃ³ cÃ¡c quyá»n truy cáº­p khÃ¡c nhau:

ğŸ”¹ Admin Sidebar
    ğŸ“Š Dashboard
    ğŸ‘¥ Quáº£n lÃ½ ngÆ°á»i dÃ¹ng
        Danh sÃ¡ch ngÆ°á»i dÃ¹ng
        PhÃ¢n quyá»n
        XÃ³a/Ban ngÆ°á»i dÃ¹ng

    ğŸ”— Quáº£n lÃ½ link
        Danh sÃ¡ch link
        Kiá»ƒm duyá»‡t link
        Link bá»‹ bÃ¡o cÃ¡o

    ğŸ“ˆ Thá»‘ng kÃª & BÃ¡o cÃ¡o
        LÆ°á»£t click theo thá»i gian
        Nguá»“n traffic
        Thiáº¿t bá»‹ & Há»‡ Ä‘iá»u hÃ nh

    ğŸ’³ Quáº£n lÃ½ thanh toÃ¡n
        Danh sÃ¡ch giao dá»‹ch
        Duyá»‡t nÃ¢ng cáº¥p Premium

    âš™ï¸ Cáº¥u hÃ¬nh há»‡ thá»‘ng
        CÃ i Ä‘áº·t chung
        Quáº£n lÃ½ API key
        Cáº¥u hÃ¬nh email



ğŸ”¸ Moderator Sidebar
    ğŸ“Š Dashboard
    ğŸ”— Quáº£n lÃ½ link
        Danh sÃ¡ch link
        Kiá»ƒm duyá»‡t link
        Link bá»‹ bÃ¡o cÃ¡o
    ğŸ“ˆ Thá»‘ng kÃª lÆ°á»£t click
    âš ï¸ BÃ¡o cÃ¡o vi pháº¡m
        Danh sÃ¡ch link bá»‹ tá»‘ cÃ¡o


ğŸŸ¢ Premium User Sidebar
    ğŸ  Trang chá»§

    ğŸ”— Quáº£n lÃ½ link cá»§a tÃ´i
        Danh sÃ¡ch link
        Chá»‰nh sá»­a link
        TÃ¹y chá»‰nh thá»i gian háº¿t háº¡n
        XÃ³a link

    ğŸ“Š Thá»‘ng kÃª link
        LÆ°á»£t click theo thá»i gian
        Nguá»“n traffic
        Thiáº¿t bá»‹ & Há»‡ Ä‘iá»u hÃ nh

    ğŸ’³ GÃ³i Premium
        ThÃ´ng tin gÃ³i
        Gia háº¡n / NÃ¢ng cáº¥p

    âš™ï¸ CÃ i Ä‘áº·t tÃ i khoáº£n


ğŸŸ¡ User Sidebar
    ğŸ  Trang chá»§

    ğŸ”— Quáº£n lÃ½ link cá»§a tÃ´i
        Danh sÃ¡ch link
        XÃ³a link

    ğŸ“Š Thá»‘ng kÃª cÆ¡ báº£n
        Tá»•ng sá»‘ lÆ°á»£t click

    âš™ï¸ CÃ i Ä‘áº·t tÃ i khoáº£n




IV. Táº¡o vÃ  config dá»± Ã¡n
1. Táº¡o dá»± Ã¡n
    composer create-project laravel/laravel ten_project "10.*"

    cd ten_project

    CÃ i Ä‘áº·t Laravel Breeze
            composer require laravel/breeze --dev

    CÃ i Ä‘áº·t Breeze vá»›i Vue
            php artisan breeze:install vue

    CÃ i Ä‘áº·t NPM Packages vÃ  build
            npm install && npm run dev


2. Config
    - .env database, cháº¡y migrate
    - Táº¡o .htaccess file
            <IfModule mod_rewrite.c>
                RewriteEngine On

                # Rewrite all requests to the public directory
                RewriteRule ^(.*)$ public/$1 [L]
            </IfModule>

II. Táº¡o migration

Báº£ng	        Quan há»‡	                                    Báº£ng
users	        1 - n	                                links
links	    1 - n	                                click_statistics
users	        1 - n	                                user_payments
users	        n - n (thÃ´ng qua role_permissions)	    permissions



ğŸ“Œ 1. Migration cho báº£ng users
        return new class extends Migration {
            public function up() {
                Schema::create('users', function (Blueprint $table) {
                    $table->id();
                    $table->string('name');
                    $table->string('email')->unique();
                    $table->string('password')->nullable(); // CÃ³ thá»ƒ null náº¿u Ä‘Äƒng nháº­p báº±ng Google
                    $table->enum('provider', ['email', 'google'])->default('email');
                    $table->string('provider_id')->nullable();
                    $table->enum('role', ['user', 'premium', 'moderator', 'admin'])->default('user');
                    $table->timestamps();
                });
            }

            public function down() {
                Schema::dropIfExists('users');
            }
        };


ğŸ“Œ 2. Migration cho báº£ng links

        return new class extends Migration {
            public function up() {
                Schema::create('links', function (Blueprint $table) {
                    $table->id();
                    $table->foreignId('user_id')->constrained()->onDelete('cascade');
                    $table->string('short_code', 20)->unique();
                    $table->text('original_url');
                    $table->enum('status', ['active', 'expired', 'disabled'])->default('active');
                    $table->timestamp('expires_at')->nullable();
                    $table->timestamps();

                    $table->index('short_code');
                    $table->index('expires_at');
                });
            }

            public function down() {
                Schema::dropIfExists('links');
            }
        };


ğŸ“Œ 3. Migration cho báº£ng click_statistics

        return new class extends Migration {
            public function up() {
                Schema::create('click_statistics', function (Blueprint $table) {
                    $table->id();
                    $table->foreignId('short_link_id')->constrained('links')->onDelete('cascade');
                    $table->string('ip_address', 45);
                    $table->text('user_agent');
                    $table->enum('referrer', ['facebook', 'google', 'ads', 'other'])->default('other');
                    $table->enum('device_type', ['mobile', 'tablet', 'pc']);
                    $table->string('os', 50);
                    $table->string('country', 100)->nullable();
                    $table->timestamp('clicked_at')->default(DB::raw('CURRENT_TIMESTAMP'));

                    $table->index('clicked_at');
                    $table->index('referrer');
                });
            }

            public function down() {
                Schema::dropIfExists('click_statistics');
            }
        };


ğŸ“Œ 4. Migration cho báº£ng permissions

        return new class extends Migration {
            public function up() {
                Schema::create('permissions', function (Blueprint $table) {
                    $table->id();
                    $table->string('code', 50)->unique();
                    $table->string('name');
                    $table->text('description')->nullable();
                    $table->timestamps();
                });
            }

            public function down() {
                Schema::dropIfExists('permissions');
            }
        };


ğŸ“Œ 5. Migration cho báº£ng role_permissions

        return new class extends Migration {
            public function up() {
                Schema::create('role_permissions', function (Blueprint $table) {
                    $table->id();
                    $table->enum('role', ['user', 'premium', 'moderator', 'admin']);
                    $table->foreignId('permission_id')->constrained('permissions')->onDelete('cascade');
                    $table->timestamps();
                });
            }

            public function down() {
                Schema::dropIfExists('role_permissions');
            }
        };


ğŸ“Œ 6. Migration cho báº£ng user_payments

        return new class extends Migration {
            public function up() {
                Schema::create('user_payments', function (Blueprint $table) {
                    $table->id();
                    $table->foreignId('user_id')->constrained('users')->onDelete('cascade');
                    $table->decimal('amount', 10, 2);
                    $table->enum('payment_method', ['credit_card', 'paypal', 'bank_transfer']);
                    $table->enum('status', ['pending', 'completed', 'failed'])->default('pending');
                    $table->timestamps();
                });
            }

            public function down() {
                Schema::dropIfExists('user_payments');
            }
        };



III. cÃ¡c quan há»‡ (relationships) giá»¯a cÃ¡c báº£ng

ğŸ“Œ 1. Model User.php

        class User extends Authenticatable {
            use HasFactory, Notifiable;

            protected $fillable = [
                'name', 'email', 'password', 'provider', 'provider_id', 'role',
            ];

            // Má»™t user cÃ³ nhiá»u link rÃºt gá»n
            public function shortLinks(): HasMany {
                return $this->hasMany(ShortLink::class);
            }

            // Má»™t user cÃ³ thá»ƒ cÃ³ nhiá»u lÆ°á»£t thanh toÃ¡n
            public function payments(): HasMany {
                return $this->hasMany(UserPayment::class);
            }

            // Má»™t user cÃ³ thá»ƒ cÃ³ nhiá»u quyá»n (thÃ´ng qua role)
            public function permissions(): BelongsToMany {
                return $this->belongsToMany(Permission::class, 'role_permissions', 'role', 'permission_id', 'role', 'id');
            }
        }


ğŸ“Œ 2. Model ShortLink.php

        class ShortLink extends Model {
            use HasFactory;

            protected $fillable = [
                'user_id', 'short_code', 'original_url', 'status', 'expires_at'
            ];

            // Má»™t link thuá»™c vá» má»™t user
            public function user(): BelongsTo {
                return $this->belongsTo(User::class);
            }

            // Má»™t link cÃ³ nhiá»u lÆ°á»£t click
            public function clicks(): HasMany {
                return $this->hasMany(ClickStatistic::class);
            }
        }



ğŸ“Œ 3. Model ClickStatistic.php

        class ClickStatistic extends Model {
            use HasFactory;

            protected $fillable = [
                'short_link_id', 'ip_address', 'user_agent', 'referrer', 'device_type', 'os', 'country', 'clicked_at'
            ];

            // Má»™t lÆ°á»£t click thuá»™c vá» má»™t link rÃºt gá»n
            public function shortLink(): BelongsTo {
                return $this->belongsTo(ShortLink::class);
            }
        }



ğŸ“Œ 4. Model Permission.php


        class Permission extends Model {
            use HasFactory;

            protected $fillable = [
                'code', 'name', 'description'
            ];

            // Má»™t quyá»n cÃ³ thá»ƒ thuá»™c vá» nhiá»u vai trÃ²
            public function roles(): BelongsToMany {
                return $this->belongsToMany(User::class, 'role_permissions', 'permission_id', 'role', 'id', 'role');
            }
        }


ğŸ“Œ 5. Model RolePermission.php

        class RolePermission extends Model {
            use HasFactory;

            protected $fillable = [
                'role', 'permission_id'
            ];

            // Má»™t quyá»n thuá»™c vá» má»™t nhÃ³m quyá»n
            public function permission(): BelongsTo {
                return $this->belongsTo(Permission::class);
            }
        }


ğŸ“Œ 6. Model UserPayment.php

        class UserPayment extends Model {
            use HasFactory;

            protected $fillable = [
                'user_id', 'amount', 'payment_method', 'status'
            ];

            // Má»™t thanh toÃ¡n thuá»™c vá» má»™t user
            public function user(): BelongsTo {
                return $this->belongsTo(User::class);
            }
        }



IV.  CÃ i Flowbite Ä‘á»ƒ láº¥y UI tá»« Flowbite
    npm install flowbite

    - ThÃªm vÃ o tailwind.config.js
        + require('flowbite/plugin')    ---->     plugins: [forms, require('flowbite/plugin')],
        + './node_modules/flowbite/**/*.js'   --->  content: [
                                                        ...
                                                        './node_modules/flowbite/**/*.js'
                                                    ],

    - cháº¡y láº¡i npm run dev

V. Viáº¿t chá»©c nÄƒng Admin
    1. DÃ¹ng Middleware Ä‘á»ƒ kiá»ƒm tra quyá»n truy cáº­p route admin
        - Táº¡o Middleware: php artisan make:middleware AdminMiddleware
            public function handle(Request $request, Closure $next , $guard = null): Response
                {
                    // náº¿u Ä‘Ã£ Ä‘Äƒng nháº­p vÃ  lÃ  admin hoáº·c moderator
                    if (Auth::check() && (Auth::user()->role == 'admin' || Auth::user()->role == 'moderator')) {
                        return $next($request);
                    }

                    return redirect()->route('home')->with('error', 'Access Denied, you are not an administrator');

                }
        - khai bÃ¡o middleware trong kennel
            protected $middlewareAliases = [
                ...
                'admin' => \App\Http\Middleware\AdminMiddleware::class,
            ];


        - Táº¡o Admin controller trong folder Admin
            php artisan make:controller Admin/AdminController

        - Viáº¿t Route chá»©a middleware Ä‘á»ƒ kiá»ƒm tra
            Route::middleware(['auth', 'admin'])->prefix('admin')->group(function () {
                Route::get('/dashboard', [AdminController::class, 'index'])->name('admin.dashboard');
            });

    2. Admin login/logout

    - Táº¡o redirectAdmin middleware Ä‘á»ƒ chuyá»ƒn hÆ°á»›ng admin
        php artisan make:middleware redirectAdmin


    - Viáº¿t phÆ°Æ¡ng thá»©c chuyá»ƒn hÆ°á»›ng náº¿u lÃ  admin hoáº·c moderator
        public function handle(Request $request, Closure $next , $guard = null): Response
            {
                if (Auth::guard($guard)->check() && optional(Auth::user())->role == 'admin') {
                    return redirect()->route('admin.dashboard');
                }


                return $next($request);
            }

    - khai bÃ¡o middleware trong kennel
            use App\Http\Middleware\redirectAdmin;
            protected $middlewareAliases = [
                ...
                'redirectAdmin' => redirectAdmin::class,
            ];


    - Táº¡o AdminAuthController
        php artisan make:controller Admin/AdminAuthController

        public function showLoginForm(){
            // hiá»ƒn thá»‹ giao diá»‡n login báº±ng vue (/resource/js/Pages/Admin/Auth)
            return Inertia::render('Admin/Auth/Login');
        }

        public function login(Request $request) {
            $user = \App\Models\User::where('email', $request->email)
                ->whereIn('role', ['admin', 'moderator'])
                ->first();


            if ($user && Auth::attempt(['email' => $request->email, 'password' => $request->password])) {
                return redirect()->route('admin.dashboard');

            }
            dd('ThÃ´ng tin Ä‘Äƒng nháº­p khÃ´ng há»£p lá»‡');
            return redirect()->route('admin.login')->with('error', 'ThÃ´ng tin Ä‘Äƒng nháº­p khÃ´ng há»£p lá»‡');
        }

        public function logout(Request $request){
            Auth::guard('web')->logout();
            $request->session()->invalidate();  // há»§y session hiá»‡n táº¡i
            return redirect()->route('admin.login');
        }

    - Táº¡o roure admin login/logout
        Route::group(['prefix' => 'admin' , 'middleware' => 'redirectAdmin'],function () {
            Route::get('login', [AdminAuthController::class, 'showLoginForm'])->name('admin.login');
            Route::post('login', [AdminAuthController::class, 'login'])->name('admin.login.post');
            Route::post('logout', [AdminAuthController::class, 'logout'])->name('admin.logout');
        });

    - Táº¡o View form login Vue
        + Táº¡o file vue (/resource/js/Pages/Admin/Auth/Login.vue)
        + Copy ná»™i dung tá»« file (/resource/js/Pages/Auth/Login.vue) bá» qua file vá»«a táº¡o

        + Thay Ä‘á»•i route Ä‘á»ƒ post form


            const submit = () => {
                // Ä‘á»•i route má»›i 'admin.login.post
                form.post(route('admin.login.post'), {
                    onFinish: () => form.reset('password'),
                });
            };


    3. Táº¡o view dashboard admin
        (/resource/js/Pages/Admin/Dashboard.vue)
        <template>
            <div>
                <h1>Admin Dashboard</h1>
            </div>
        </template>

        <script setup>

        </script>

        - gá»i Ä‘áº¿n file dashboard trong AdminController
            public function index(){
                    return Inertia::render('Admin/Dashboard');
                }


    4. Táº¡o giao diá»‡n Dashboard Admin tá»« flowbite
    - chá»n 1 block giao diá»‡n trong https://flowbite.com/blocks/
    - VD chá»n https://flowbite.com/blocks/application/shells/
    - copy code bá» vÃ o template cá»§a Dashboard.vue
    - ThÃªm Ä‘oáº¡n dÆ°á»›i Ä‘á»ƒ load hiá»‡u á»©ng
        <script setup>

            import { onMounted } from 'vue'
            import { initFlowbite } from 'flowbite'

            // initialize components based on data attribute selectors
            onMounted(() => {
                initFlowbite();
            })

        </script>


    - PhÃ¢n tÃ¡ch giao diá»‡n thÃ nh cÃ¡c thÃ nh pháº§n nhá» cÃ³ thá»ƒ sá»­ dá»¥ng láº¡i
        + Táº¡o folder Pages/Admin/components
        + Táº¡o file Navbar.vue, Sidebar.vue, Footer.vue
        + Pages/Admin/components/AdminLayout.vue chá»©a cÃ¡c component cá»§a Navbar, Sidebar, Footer Ä‘Ã£ pháº§n tÃ¡ch
                    <template>
                        <div class="antialiased bg-gray-50 dark:bg-gray-900">
                            <!-- Navbar -->
                            <Navbar />
                            <!-- End Navbar -->

                            <!-- Sidebar -->
                            <Sidebar/>
                            <!-- End Sidebar -->

                            <main class="p-4 md:ml-64 h-auto pt-20">
                                <slot />
                            </main>
                        </div>
                    </template>

                    <script setup>
                        import { onMounted } from "vue";
                        import { initFlowbite } from "flowbite";
                        import Navbar from "./Navbar.vue";
                        import Sidebar from "./Sidebar.vue";


                        // initialize components based on data attribute selectors
                        onMounted(() => {
                            initFlowbite();
                        });
                    </script>


        + Dashboard.vue chá»©a ná»™i dung Main vÃ  gá»i AdminLayout vÃ o
                    <template>
                        <AdminLayout>
                            <main>
                                ...
                            </main>
                        </AdminLayout>
                    </template>

                    <script setup>
                        // gá»i AdminLayout
                        import AdminLayout from "./AdminLayout.vue";
                    </script>


        *Note:
            - Tháº» <slot></slot> Ä‘Æ°á»£c sá»­ dá»¥ng trong component Ä‘á»ƒ xÃ¡c Ä‘á»‹nh má»™t vÃ¹ng chÃ¨n ná»™i dung (content insertion point). ÄÃ¢y lÃ  má»™t pháº§n quan trá»ng cá»§a slot-based content distribution vÃ  Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ chÃ¨n ná»™i dung tá»« bÃªn ngoÃ i vÃ o component con, cho phÃ©p cÃ¡c component trá»Ÿ nÃªn linh hoáº¡t vÃ  tÃ¡i sá»­ dá»¥ng.

            - CÃ¡ch hoáº¡t Ä‘á»™ng cá»§a <slot></slot>
                + Component cha (Parent): Khi báº¡n sá»­ dá»¥ng má»™t component vÃ  muá»‘n chÃ¨n ná»™i dung cá»¥ thá»ƒ vÃ o trong nÃ³, báº¡n cÃ³ thá»ƒ Ä‘áº·t ná»™i dung Ä‘Ã³ giá»¯a tháº» má»Ÿ vÃ  Ä‘Ã³ng cá»§a component.
                + Component con (Child): Tháº» <slot></slot> trong component con sáº½ lÃ  nÆ¡i hiá»ƒn thá»‹ ná»™i dung mÃ  component cha truyá»n vÃ o.



    - Thay Ä‘á»•i route button logout
        - á»Ÿ Navbar thanh Ä‘á»•i tháº» a cá»§a button logout thÃ nh Link (dÃ¹ng route Link)
                <li>
                    // gá»i Ä‘áº¿n name cá»§a route
                    <Link :href="route('logout')" method="post"
                        class="block py-2 px-4 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" >Log Out
                    </Link>
                </li>

        - Khai bÃ¡o Link á»Ÿ script
            <script setup>
                import { Link } from "@inertiajs/vue3";
            </script>



    5.Táº¡o view cho dashboard
                + Táº¡o file /Dashboard/Index.vue (/resources/js/pages/Admin/Dashboard)
                + Táº¡o component Dashboard List cho admin Dashboard
                        . Táº¡o file Admin/Dashboard/Dashboard.vue (cÃ¹ng cáº¥p vá»›i file Index phÃ­a trÃªn)
                        . chá»n 1 block giao diá»‡n trong https://flowbite.com/blocks/
                        . VD chá»n https://flowbite.com/blocks/application/advanced-tables/
                        . copy code bá» vÃ o template cá»§a file vá»«a táº¡o

                + import AdminLayout vÃ  ProductList vÃ o page product
                        <script setup>
                            import AdminLayout from '../Components/AdminLayout.vue'
                            import ProductList from './ProductList.vue'
                        <style lang="scss" scoped>

                + Gá»i Admin Layout vÃ o page product
                    <template>
                        <AdminLayout>
                            <ProductList>

                            </ProductList>
                        </AdminLayout>
                    </template>


    6. Chá»©c nÄƒng quáº£n lÃ½ link
        -Táº¡o /Admin/LinkController,
            php artisan make:controller Admin/LinkController

            public function index(){
                // trá» Ä‘áº¿n file view
                return Inertia::render('Admin/Link/Index');
            }


        - Táº¡o route cho admin link
            Route::middleware(['auth', 'admin'])->prefix('admin')->group(function () {
                ...
                // link
                Route::get('/links', [LinkController::class, 'index'])->name('admin.links.index');

            });


        - Táº¡o view cho admin link
            + Táº¡o file /Link/Index.vue (/resources/js/pages/Admin/Link)

                <template>
                    <AdminLayout>
                        <LinkList :links="links">

                        </LinkList>
                    </AdminLayout>
                </template>

                <script setup>
                    defineProps( {
                        links: Array
                    } );

                    import AdminLayout from '../Components/AdminLayout.vue'
                    import LinkList from './LinkList.vue'
                </script>


            + Táº¡o component Link List cho admin link
                    . Táº¡o file Admin/Link/LinkList.vue (cÃ¹ng cáº¥p vá»›i file Index phÃ­a trÃªn)
                    . chá»n 1 block giao diá»‡n trong https://flowbite.com/blocks/
                    . VD chá»n https://flowbite.com/blocks/application/advanced-tables/
                    . copy code bá» vÃ o template cá»§a file vá»«a táº¡o

            + import AdminLayout vÃ  LinkList vÃ o page link
                    <script setup>
                        import AdminLayout from '../Components/AdminLayout.vue'
                        import LinkList from './LinkList.vue'
                    <style lang="scss" scoped>

            + Gá»i Admin Layout vÃ o page link
                <template>
                    <AdminLayout>
                        <LinkList>

                        </LinkList>
                    </AdminLayout>
                </template>

        - Äáº©y dá»¯ liá»‡u tá»« DB ra view
                + Láº¥y dá»¯ liá»‡u tá»« LinkController
                    public function index(){
                        //láº¥y táº¥t cáº£ cÃ¡c báº£n ghi tá»« báº£ng links
                        //Káº¿t quáº£ tráº£ vá» lÃ  má»™t táº­p há»£p (collection) chá»©a táº¥t cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng Link.
                        $links = Link::get();
                        // render component vá»›i tham sá»‘ lÃ  'links' vá»›i giÃ¡ trá»‹ lÃ  káº¿t quáº£ láº¥y tá»« table
                        return Inertia::render('Admin/Link/Index', ['links' => $links]);
                    }


                + á»Ÿ view LinkList.vue láº¥y dá»¯ liá»‡u hiá»ƒn thá»‹ ra mÃ n hÃ¬nh báº±ng vÃ²ng láº·p
                    <script setup>
                        import { usePage } from '@inertiajs/vue3';

                        const links = usePage().props.links;
                        console.log(links);
                    </script>


        -Táº¡o Modal add/edit link **
            + DÃ¹ng thÆ° viá»‡n element-plus
                https://element-plus.org/en-US/component/upload.html

            + cÃ i element-plus.org
                npm install element-plus --save

            + import to global
                . app.js
                    import ElementPlus from 'element-plus'
                    import 'element-plus/dist/index.css'

                    ...
                    setup({ el, App, props, plugin }) {

                        app.use(VueSweetalert2)
                        window.Swal = app.config.globalProperties.$swal
                    },


        - import sweatalert Ä‘á»ƒ hiá»ƒn thá»‹ thÃ´ng bÃ¡o
            npm i vue-sweetalert2

            + app.js
                import VueSweetalert2 from 'vue-sweetalert2';
                import 'sweetalert2/dist/sweetalert2.min.css';

                ...


                setup({ el, App, props, plugin }) {
                    const app = createApp({ render: () => h(App, props)})

                    app.use(plugin)
                    app.use(ZiggyVue)
                    app.use(ElementPlus)
                    app.mount(el)
                },


        - Táº¡o cÃ¡c thÃ´ng bÃ¡o táº¡m thá»i (flash messages) lÆ°u trong session
            Http/Middleware/HandleInertiaRequests.php
                public function share(Request $request): array
                {
                    return [
                        ...parent::share($request),
                        'auth' => [
                            'user' => $request->user(),
                        ],
                        // flash message
                        'flash' => [
                            'success' => fn () => $request->session()->get('success'),
                            'error' => fn () => $request->session()->get('error'),
                            'warning' => fn () => $request->session()->get('warning'),
                            'info' => fn () => $request->session()->get('info'),
                        ],
                    ];
                }

        - Táº¡o link má»›i
           + route
                Route::post('/links/store', [LinkController::class, 'store'])->name('admin.links.store');

            + controller
                        public function store(Request $request) {
                                // Validate dá»¯ liá»‡u Ä‘áº§u vÃ o
                                $validator = Validator::make($request->all(), [
                                    'title' => 'required|string|max:255',
                                    'short_code' => 'required|string|max:50|unique:links,short_code',
                                    'original_link' => 'required',
                                    'endDate' => 'nullable|date|after:today',
                                ], [
                                    'title.required' => 'Vui lÃ²ng nháº­p tiÃªu Ä‘á».',
                                    'short_code.required' => 'Vui lÃ²ng nháº­p Halfback.',
                                    'short_link.unique' => 'link rÃºt gá»n Ä‘Ã£ tá»“n táº¡i!',
                                    'original_link.required' => 'Vui lÃ²ng nháº­p link gá»‘c.',
                                    'original_link.url' => 'link khÃ´ng há»£p lá»‡.',
                                    'endDate.date' => 'NgÃ y háº¿t háº¡n khÃ´ng há»£p lá»‡.',
                                    'endDate.after' => 'NgÃ y háº¿t háº¡n pháº£i lá»›n hÆ¡n hÃ´m nay.',
                                ]);

                                // Náº¿u cÃ³ lá»—i, quay láº¡i trang trÆ°á»›c vá»›i lá»—i vÃ  giá»¯ láº¡i dá»¯ liá»‡u nháº­p
                                if ($validator->fails()) {
                                    return redirect()->route('admin.links.index')
                                        ->withErrors($validator); // Laravel tá»± Ä‘á»™ng xá»­ lÃ½ lá»—i

                                }



                                // LÆ°u link vÃ o database
                                $link = new Link();
                                $link->title = $request->title;
                                $link->user_id = auth()->user()->id;
                                $link->short_code = $request->short_code;
                                $link->original_url = $request->original_link;
                                $link->status = 'active';
                                $link->expires_at = $request->endDate;

                                $link->save();

                                return redirect()->route('admin.links.index')->with('success', 'ThÃªm link thÃ nh cÃ´ng!');
                            }

            + view:
                . cÃ¡c trÆ°á»ng: TiÃªu Ä‘á», link gá»‘c, tÃ¹y chá»‰nh halfback, thá»i gian káº¿t thÃºc

    7 . Chá»©c nÄƒng quáº£n lÃ½ ngÆ°á»i dÃ¹ng

        -Táº¡o /Admin/UserController,
            php artisan make:controller Admin/UserController

            public function index(){
                // trá» Ä‘áº¿n file view
                return Inertia::render('Admin/User/Index');
            }


        - Táº¡o route cho admin user
            Route::middleware(['auth', 'admin'])->prefix('admin')->group(function () {
                ...
                // user
                Route::get('/users', [UserController::class, 'index'])->name('admin.users.index');

            });


        - Táº¡o view cho admin user
            + Táº¡o file /User/Index.vue (/resources/js/pages/Admin/User)

                <template>
                    <AdminLayout>
                        <UserList :user="user">

                        </UserList>
                    </AdminLayout>
                </template>

                <script setup>
                    defineProps( {
                        user: Array
                    } );

                    import AdminLayout from '../Components/AdminLayout.vue'
                    import UserList from './UserList.vue'
                </script>

            + Táº¡o component User List cho admin user
                    . Táº¡o file Admin/User/UserList.vue (cÃ¹ng cáº¥p vá»›i file Index phÃ­a trÃªn)
                    . chá»n 1 block giao diá»‡n trong https://flowbite.com/blocks/
                    . VD chá»n https://flowbite.com/blocks/application/advanced-tables/
                    . copy code bá» vÃ o template cá»§a file vá»«a táº¡o

            + import AdminLayout vÃ  UserList vÃ o page user
                    <script setup>
                        import AdminLayout from '../Components/AdminLayout.vue'
                        import UserList from './UserList.vue'
                    <style lang="scss" scoped>

            + Gá»i Admin Layout vÃ o page user
                <template>
                    <AdminLayout>
                        <User>

                        </User>
                    </AdminLayout>
                </template>



    8. Chá»©c nÄƒng quáº£n lÃ½ nhÃ³m ngÆ°á»i dÃ¹ng
        - Táº¡o model Group

        -Táº¡o /Admin/GroupController,
            php artisan make:controller Admin/GroupController

            public function index(){
                // trá» Ä‘áº¿n file view
                return Inertia::render('Admin/Group/Index');
            }


        - Táº¡o route cho admin group
            Route::middleware(['auth', 'admin'])->prefix('admin')->group(function () {
                ...
                // group
                Route::get('/groups', [GroupController::class, 'index'])->name('admin.groups.index');

            });


        - Táº¡o view cho admin group
            + Táº¡o file /Group/Index.vue (/resources/js/pages/Admin/Group)

                <template>
                    <AdminLayout>
                        <GroupList :groups="groups">

                        </GroupList>
                    </AdminLayout>
                </template>

                <script setup>
                    defineProps( {
                        groups: Array
                    } );

                    import AdminLayout from '../Components/AdminLayout.vue'
                    import GroupList from './GroupList.vue'
                </script>


            + Táº¡o component Group List cho admin group
                    . Táº¡o file Admin/Group/GroupList.vue (cÃ¹ng cáº¥p vá»›i file Index phÃ­a trÃªn)
                    . chá»n 1 block giao diá»‡n trong https://flowbite.com/blocks/
                    . VD chá»n https://flowbite.com/blocks/application/advanced-tables/
                    . copy code bá» vÃ o template cá»§a file vá»«a táº¡o


            + Táº¡o component Group List cho admin Group
                    . Táº¡o file Admin/Group/GroupList.vue (cÃ¹ng cáº¥p vá»›i file Index phÃ­a trÃªn)
                    . chá»n 1 block giao diá»‡n trong https://flowbite.com/blocks/
                    . VD chá»n https://flowbite.com/blocks/application/advanced-tables/
                    . copy code bá» vÃ o template cá»§a file vá»«a táº¡o

            + import AdminLayout vÃ  GroupList vÃ o page Group
                    <script setup>
                        import AdminLayout from '../Components/AdminLayout.vue'
                        import GroupList from './GroupList.vue'
                    <style lang="scss" scoped>

            + Gá»i Admin Layout vÃ o page Group
                <template>
                    <AdminLayout>
                        <Group>

                        </Group>
                    </AdminLayout>
                </template>



        - Táº¡o table group
            id => int
            name => varchar(100)
            permission => text
            created_at => timestamp
            updated_at  => timestamp


    9. Táº¡o table module (module: user, link, group, ....)
        - á»Ÿ pháº§n module chá»‰ táº¡o table vÃ  model Ä‘á»ƒ láº¥y dá»¯ liá»‡u hiá»ƒn thá»‹ á»Ÿ permission
        - Táº¡o model Module
            php artisan make:model Module -m

        - Táº¡o table module migration
            $table->id();
            $table->string('name');
            $table->string('title');
            $table->timestamps();

        - Táº¡o seeder
                DB::table('Modules')->insert([
                    'name' => 'users',
                    'title' => 'Quáº£n lÃ½ ngÆ°á»i dÃ¹ng',
                    'created_at' => date('Y-m-d H:i:s'),
                    'updated_at' => date('Y-m-d H:i:s')
                ]);

                DB::table('Modules')->insert([
                    'name' => 'groups',
                    'title' => 'Quáº£n lÃ½ nhÃ³m',
                    'created_at' => date('Y-m-d H:i:s'),
                    'updated_at' => date('Y-m-d H:i:s')
                ]);

                DB::table('Modules')->insert([
                    'name' => 'links',
                    'title' => 'Quáº£n lÃ½ link',
                    'created_at' => date('Y-m-d H:i:s'),
                    'updated_at' => date('Y-m-d H:i:s')
                ]);






















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































